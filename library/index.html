<!DOCTYPE html>
<head>
    <meta charset = 'UTF-8'>
    <title>My library</title>
    <link rel = 'stylesheet' href = 'style.css'><link>
</head>
<body>
<header>
    <h1> Library</h1>
    <button id = 'addBook'>+</button></header>

    <form>
        <div class = 'form-div'>
        <div  class = 'in-form' id = 'title-div'>
        <label for = 'title' >Title:</label>
        <input type = 'text' id = 'title' name = 'title' >
    </div>
    <div  class = 'in form' id = 'author-input'>
        <label for = 'author'>Author:</label>
        <input type = 'text' id = 'author' name = 'author'/>
    </div>
<div class = 'in-form'>
<label for = 'pages'># of Pages:</label>
<input type = 'number' id = 'pages' name = 'pages'>

</div>
<div id = 'read-group' class = 'in-form'>
    <p>Read:</p>
<label><input 
     id = 'read'
     value = 'read'
     name = 'read'
     type = 'checkbox'/></label>
</div></div>
<button type = 'button' id = 'submit'>Submit</button>
</form>
<div id = 'book-container'>
</div>

    <script>
let myLibrary = [];
const newConsole = document.querySelector('#console');
const submitBtn = document.querySelector('#submit');
const form = document.querySelector('form');
const newBookBtn = document.querySelector('#addBook');


   
submitBtn.addEventListener('click', addBookToLibrary);
newBookBtn.addEventListener('click', showForm);
function showForm(){ 
      if(form.style.display === 'block'){
          form.style.display = 'none';
      }
      else{
        form.style.display = 'block';
      }
    }

    function Book(title,author,pages, isRead){
this.title = title,
this.pages = pages,
this.author = author,
this.isRead = isRead
    }
 
    
    addBookToLibrary.prototype = Object.create(Book);

function addBookToLibrary(){
    let isReadInput;
    let authorInput = document.querySelector('#author').value;
    let titleInput = document.querySelector('#title').value;
    let pagesInput = document.querySelector('#pages').value;
    readInput = document.querySelector('#read');
    if(readInput.checked === true){
         isReadInput = 'yes'
    }
    else{
    isReadInput = 'no';
    }
    let newBook = new Book( 
        authorInput,
         titleInput,
         pagesInput,
        isReadInput,);
        newBook.logBook();
        showForm();
     
     
     
}
let bookObj;
Book.prototype.logBook = function(){
      bookObj = {author: this.author, title:this.title, pages:this.pages, read:this.isRead};
        myLibrary.push(
      bookObj
        );
       console.log(myLibrary);
         createBook();
       
        }
function createBook(){
const container = document.querySelector('#book-container');
const removeBtn = document.createElement('button');
removeBtn.textContent = 'Remove';
removeBtn.classList.add('remove-button');
const readBook = document.createElement('p');
const authorOfBook = document.createElement('p');
const pagesInBook = document.createElement('p');
const titleOfBook = document.createElement('p')
const bookGroup = document.createElement('div');
bookGroup.classList.add('book-group')
container.appendChild(bookGroup);
authorOfBook.textContent = 'author:' + bookObj.author;
pagesInBook.textContent = 'Pages:' + bookObj.pages;
titleOfBook.textContent = 'Title:' + bookObj.title;
readBook.textContent = 'Read: ' + bookObj.read;
const isReadBtn = document.createElement('button');
isReadBtn.classList.add('is-read-btn');
bookGroup.appendChild(readBook);
bookGroup.appendChild(titleOfBook);
bookGroup.appendChild(pagesInBook);
bookGroup.appendChild(authorOfBook);

bookGroup.appendChild(removeBtn);
bookGroup.appendChild(isReadBtn);
isReadBtn.textContent = 'update read status'
    isReadBtn.addEventListener('click', changeRead)
     removeBtn.addEventListener('click', removeBook)   
     function removeBook(){
        let x =  removeBtn.parentElement;
        container.removeChild(x);
        }
        function changeRead(){
            console.log(bookObj.read)
        if (bookObj.read ==  'yes'){
            bookObj.read = 'no';
            readBook.textContent = 'Read: ' + bookObj.read;

        }
        else{
            bookObj.read = 'yes';
            readBook.textContent = 'Read: ' + bookObj.read;
        }
        console.log(bookObj.read)
    }
   
}
  

    </script>
    
</body>
